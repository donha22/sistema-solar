<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Solar Completo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden; /* Remove barras de rolagem */
            font-family: 'Inter', sans-serif;
            background-color: #1a1a2e; /* Cor de fundo escura */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #e0e0e0;
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
            border-radius: 15px; /* Cantos arredondados para o canvas */
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5); /* Sombra azul-claro */
        }
        .container {
            width: 90vw; /* Largura fluida */
            height: 80vh; /* Altura fluida */
            max-width: 1200px; /* Largura máxima maior para o sistema solar */
            max-height: 800px; /* Altura máxima maior */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #2a2a4a; /* Fundo do container */
            border-radius: 20px;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
        }
        h1 {
            color: #8affff; /* Cor do título */
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
        }
        .instructions {
            margin-top: 20px;
            text-align: center;
            font-size: 0.9em;
            color: #b0b0b0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Nosso Sistema Solar</h1>
        <canvas id="planetCanvas"></canvas>
        <div class="instructions">
            Arraste o mouse para mudar o ângulo da câmera e explore os planetas!
        </div>
    </div>

    <script>
        // Variáveis globais para a cena Three.js
        let scene, camera, renderer, sun;
        let mouseX = 0, mouseY = 0;
        let targetX = 0, targetY = 0;
        const windowHalfX = window.innerWidth / 2;
        const windowHalfY = window.innerHeight / 2;

        // Array para armazenar os objetos do sistema solar (planetas e seus grupos de órbita)
        const solarSystemObjects = [];

        // Dados dos planetas (raio, cor, distância do sol, velocidade orbital, velocidade de rotação, anéis)
        const planetsData = [
            { name: "Mercúrio", radius: 0.3, color: 0x888888, distance: 5, orbitalSpeed: 0.008, rotationSpeed: 0.01 },
            { name: "Vênus", radius: 0.5, color: 0xdd9900, distance: 8, orbitalSpeed: 0.006, rotationSpeed: 0.005 },
            { name: "Terra", radius: 0.6, color: 0x3366ff, distance: 11, orbitalSpeed: 0.004, rotationSpeed: 0.005 },
            { name: "Marte", radius: 0.4, color: 0xcc3300, distance: 14, orbitalSpeed: 0.003, rotationSpeed: 0.004 },
            { name: "Júpiter", radius: 1.8, color: 0xaa8866, distance: 20, orbitalSpeed: 0.0015, rotationSpeed: 0.015 },
            { name: "Saturno", radius: 1.5, color: 0xddccaa, distance: 26, orbitalSpeed: 0.001, rotationSpeed: 0.012, hasRings: true },
            { name: "Urano", radius: 1.2, color: 0x99ccff, distance: 32, orbitalSpeed: 0.0007, rotationSpeed: 0.008 },
            { name: "Netuno", radius: 1.2, color: 0x6666ff, distance: 38, orbitalSpeed: 0.0005, rotationSpeed: 0.007 }
        ];

        // Função de inicialização da cena
        function init() {
            // Cena
            scene = new THREE.Scene();

            // Câmera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 60; // Posição inicial da câmera para ver todo o sistema

            // Renderizador
            renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('planetCanvas'), antialias: true });
            renderer.setSize(window.innerWidth * 0.9, window.innerHeight * 0.8); // Define o tamanho inicial do renderizador
            renderer.setPixelRatio(window.devicePixelRatio); // Melhora a qualidade em telas de alta densidade

            // --- Criar o Sol ---
            const sunGeometry = new THREE.SphereGeometry(3, 32, 32); // Raio maior para o sol
            const sunMaterial = new THREE.MeshBasicMaterial({
                color: 0xffff00, // Amarelo brilhante
                emissive: 0xffaa00 // Emissão de luz para simular o brilho do sol
            });
            sun = new THREE.Mesh(sunGeometry, sunMaterial);
            scene.add(sun);

            // --- Luz do Sol (PointLight) ---
            // Uma PointLight emite luz de um único ponto em todas as direções, como o sol.
            const sunLight = new THREE.PointLight(0xffffff, 1.5, 200); // Cor branca, intensidade 1.5, distância 200
            sunLight.position.set(0, 0, 0); // Posiciona a luz no centro, onde o sol está
            scene.add(sunLight);

            // --- Criar os Planetas ---
            planetsData.forEach(data => {
                const planetGeometry = new THREE.SphereGeometry(data.radius, 32, 32);
                const planetMaterial = new THREE.MeshPhongMaterial({
                    color: data.color,
                    emissive: data.color * 0.1, // Emissão de luz sutil baseada na cor
                    specular: 0x999999,
                    shininess: 30
                });
                const planetMesh = new THREE.Mesh(planetGeometry, planetMaterial);

                // Grupo para a órbita do planeta
                const planetOrbitGroup = new THREE.Group();
                scene.add(planetOrbitGroup); // Adiciona o grupo à cena

                // Posiciona o planeta longe do centro do grupo para criar a órbita
                planetMesh.position.x = data.distance;
                planetOrbitGroup.add(planetMesh); // Adiciona o planeta ao grupo de órbita

                // Adicionar anéis para Saturno
                if (data.hasRings) {
                    const ringGeometry = new THREE.RingGeometry(data.radius * 1.2, data.radius * 2, 32); // Raio interno, raio externo
                    const ringMaterial = new THREE.MeshBasicMaterial({
                        color: 0xaaaaaa, // Cor dos anéis
                        side: THREE.DoubleSide // Renderiza os dois lados dos anéis
                    });
                    const rings = new THREE.Mesh(ringGeometry, ringMaterial);
                    rings.rotation.x = Math.PI / 2; // Inclina os anéis para que fiquem planos
                    planetMesh.add(rings); // Adiciona os anéis ao planeta
                }

                // Armazena o planeta e seu grupo de órbita para uso na animação
                solarSystemObjects.push({
                    planetMesh: planetMesh,
                    planetOrbitGroup: planetOrbitGroup,
                    orbitalSpeed: data.orbitalSpeed,
                    rotationSpeed: data.rotationSpeed
                });
            });

            // --- Criar um Campo de Estrelas ---
            const starGeometry = new THREE.BufferGeometry();
            const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.1 }); // Estrelas brancas pequenas

            const starVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 2000;
                const y = (Math.random() - 0.5) * 2000;
                const z = (Math.random() - 0.5) * 2000;
                starVertices.push(x, y, z);
            }
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const stars = new THREE.Points(starGeometry, starMaterial);
            scene.add(stars);


            // Adicionar ouvintes de evento para interação do mouse
            document.addEventListener('mousemove', onDocumentMouseMove);
            document.addEventListener('touchstart', onDocumentTouchStart);
            document.addEventListener('touchmove', onDocumentTouchMove);

            // Chamar a função de animação
            animate();
        }

        // Função de animação
        function animate() {
            requestAnimationFrame(animate); // Loop de animação

            // Rotação do sol
            sun.rotation.y += 0.001;

            // Animação de cada planeta
            solarSystemObjects.forEach(obj => {
                // Rotação do planeta em seu próprio eixo
                obj.planetMesh.rotation.y += obj.rotationSpeed;
                // Movimento de translação do planeta ao redor do sol
                obj.planetOrbitGroup.rotation.y += obj.orbitalSpeed;
            });

            // Interação da câmera com o mouse
            targetX = mouseX * 0.0005; // Ajuste para sensibilidade
            targetY = mouseY * 0.0005; // Ajuste para sensibilidade

            camera.rotation.y += (targetX - camera.rotation.y) * 0.05;
            camera.rotation.x += (targetY - camera.rotation.x) * 0.05;

            renderer.render(scene, camera); // Renderiza a cena
        }

        // Função para lidar com o movimento do mouse
        function onDocumentMouseMove(event) {
            mouseX = (event.clientX - windowHalfX);
            mouseY = (event.clientY - windowHalfY);
        }

        // Funções para lidar com eventos de toque (para dispositivos móveis)
        function onDocumentTouchStart(event) {
            if (event.touches.length === 1) {
                event.preventDefault(); // Previne rolagem
                mouseX = event.touches[0].pageX - windowHalfX;
                mouseY = event.touches[0].pageY - windowHalfY;
            }
        }

        function onDocumentTouchMove(event) {
            if (event.touches.length === 1) {
                event.preventDefault(); // Previne rolagem
                mouseX = event.touches[0].pageX - windowHalfX;
                mouseY = event.touches[0].pageY - windowHalfY;
            }
        }

        // Função para lidar com o redimensionamento da janela
        function onWindowResize() {
            const container = document.querySelector('.container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }

        // Adicionar ouvinte de evento para redimensionamento da janela
        window.addEventListener('resize', onWindowResize);

        // Iniciar a aplicação quando a janela carregar
        window.onload = function () {
            init();
            onWindowResize(); // Ajusta o tamanho inicial do canvas
        };
    </script>
</body>
</html>
